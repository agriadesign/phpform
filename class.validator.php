<?php

/******************************/
/* version 0.2.1 @ 2010.02.10 */
/******************************/

class Validator
{
    //-----------------------------------------------------------------------------------------------------------------
    protected $_formId;
    protected $_checks = array();
    //-----------------------------------------------------------------------------------------------------------------
    public function setFormId($value)
    {
        $this->_formId = $value;
    }
    //-----------------------------------------------------------------------------------------------------------------
    public function getFormId()
    {
        return $this->_formId;
    }
    //-----------------------------------------------------------------------------------------------------------------
    public function __construct($formId)
    {
        $this->setFormId($formId);
    }
    //-----------------------------------------------------------------------------------------------------------------
    public function validate($id, $type)
    {
        $this->_checks[] = array('id'   => $id,
                                 'type' => $type);
    }
    //-----------------------------------------------------------------------------------------------------------------
    public function render()
    {
        $id = $this->getFormId();
        $v = "val" . $id;
        echo '<script type="text/javascript">' . "\n" . '//<![CDATA[' . "\n";
        echo 'function validator' . $id . '()' . "\n" . '{' . "\n";
        echo "\t" . 'var ' . $v . ' = new Validator();' . "\n";
        foreach($this->_checks as $tmp) {
            echo "\t" . $v . '.validate("' . $tmp['id'] . '", "' . $tmp['type'] . '");' . "\n";
		}
        echo "\t" . 'return ' . $v . '.validateForm();' . "\n";
        echo '}' . "\n";
        echo '//]]>' . "\n" . '</script>' . "\n";
    }
    //-----------------------------------------------------------------------------------------------------------------
}
?>